* Enabling Bluetooth on Arch Linux with i3wm

This tutorial is based on the official Arch Wiki and common setups for a minimal i3wm environment.

** Install the required packages

#+begin_src bash
sudo pacman -S bluez bluez-utils
#+end_src

- ~bluez~ provides the Bluetooth stack.
- ~bluez-utils~ includes ~bluetoothctl~ for management.

** Enable and start the Bluetooth service

#+begin_src bash
sudo systemctl enable --now bluetooth.service
#+end_src

- This starts the service now and enables it on boot.
- Check status:

#+begin_src bash
systemctl status bluetooth.service
#+end_src

** Unblock Bluetooth (if blocked by rfkill)

#+begin_src bash
rfkill list
#+end_src

If Bluetooth is soft-blocked:

#+begin_src bash
rfkill unblock bluetooth
#+end_src

** Basic management via CLI (using bluetoothctl)

Run:

#+begin_src bash
bluetoothctl
#+end_src

Inside the interactive prompt:

#+begin_example
power on          # Turn Bluetooth on
scan on           # Scan for devices (discoverable mode on your device)
pair XX:XX:XX:XX:XX:XX   # Pair with device's MAC (shown in scan)
trust XX:XX:XX:XX:XX:XX  # Optional: auto-connect in future
connect XX:XX:XX:XX:XX:XX
exit
#+end_example

This works perfectly in a terminal with i3wmâ€”no GUI needed.

** Recommended GUI manager for i3wm (tray applet)

i3wm doesn't have a built-in Bluetooth tray, so install **Blueman** (lightweight GTK-based manager with a system tray applet):

#+begin_src bash
sudo pacman -S blueman
#+end_src

- Start the tray applet:

#+begin_src bash
blueman-applet
#+end_src

  (run in terminal or add to your i3 config for autostart).

- To autostart in i3: Add this line to ~~/.config/i3/config~:

#+begin_example
exec --no-startup-id blueman-applet
#+end_example

- Then reload i3 (~Mod+Shift+R~).

A tray icon will appear (assuming you have a status bar like i3status/polybar that supports trays). Right-click it to manage devices, or run ~blueman-manager~ for the full GUI.

*** Alternative lightweight option: Blueberry

#+begin_src bash
sudo pacman -S blueberry
#+end_src

Run ~blueberry~ for the manager (no persistent tray).

** Troubleshooting tips

- If no adapter is detected: Check ~lsmod | grep btusb~ (kernel module). Reload if needed:

#+begin_src bash
sudo modprobe btusb
#+end_src

- For audio devices (headphones/speakers): Ensure PipeWire or PulseAudio is set up with Bluetooth support (e.g., ~pipewire-pulse~ replaces ~pulseaudio-bluetooth~ in modern setups).

- Dual-boot issues: See Arch Wiki for pairing key fixes if devices don't reconnect properly.

For full details, refer to the [[https://wiki.archlinux.org/title/Bluetooth][Arch Wiki Bluetooth page]]. This should get Bluetooth fully working in your i3wm setup!
